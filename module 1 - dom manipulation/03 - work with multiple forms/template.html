<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Password Visibility - Multiple Forms</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<style type="text/css">
			body {
				margin: 0 auto;
				max-width: 40em;
				width: 88%;
			}

			label {
				display: block;
				width: 100%;
			}

			input {
				margin-bottom: 1em;
			}

			[type="checkbox"] {
				margin-bottom: 0;
				margin-right: 0.25em;
			}
		</style>
	</head>
	<body>

		<h1>Password Visibility - Multiple Forms</h1>

		<h2>Change Username</h2>

		<p>Enter your username and password to change your username.</p>

		<form id="form1">
			<div>
				<label for="username">Username</label>
				<input type="text" name="username" id="username">
			</div>

			<div>
				<label for="password">Password</label>
				<input type="password" name="password" id="password">
			</div>

			<div>
				<label for="show-password">
					<input type="checkbox" name="show-password" id="show-password">
					Show password
				</label>
			</div>

			<p>
				<button type="submit">Change Username</button>
			</p>
		</form>

		<h2>Change Password</h2>

		<p>Enter your current password and new password below.</p>

		<form id="form2">
			<div>
				<label for="current-password">Current Password</label>
				<input type="password" name="current-password" id="current-password">
			</div>

			<div>
				<label for="new-password">New Password</label>
				<input type="password" name="new-password" id="new-password">
			</div>

			<div>
				<label for="show-passwords">
					<input type="checkbox" name="show-passwords" id="show-passwords">
					Show passwords
				</label>
			</div>

			<p>
				<button type="submit">Change Passwords</button>
			</p>
		</form>

		<script>
			// Your code goes here...

			let form2 = document.querySelector('#form2');
let form1 = document.querySelector('#form1');
let form2pws = form2.querySelectorAll('[type="password"]');
let form1pws = form1.querySelectorAll('[type="password"]');


			// Create function to turn password types to whatever you want


			function changeFields (fields, type) {
				console.log('in change function');
				for (let field of fields) {
					field.type = type;
				}
			}

			// Naive implementation is to just put an event listener on each checkbox and reusue what we had before.
			// Better solution is to listen at the document level for checkbox events and then change form fields accordingly. Though even then we have some repeat code, but let's ee if we can do that right.

			document.addEventListener ('click', function (event) {

				let elem = event.target;
				if (elem.id === 'show-password' ) {
					if (elem.checked) {
						console.log('box checked');
						changeFields(form1pws, 'text');
					} else {
						changeFields (form1pws, 'password');
					}
				}
			else	if (elem.id === 'show-passwords' ) {
				if (elem.checked) {
						console.log('box 2 checked');
						changeFields(form2pws, 'text');
					} else {
						changeFields (form2pws, 'password');
					}
				}
			});



		</script>
	</body>
</html>